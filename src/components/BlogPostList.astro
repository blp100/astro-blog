---
import { useTranslations } from "../i18n/utils";
import BlogDate from "./BlogDate.astro";
import { Markdown } from "@astropub/md";

const {
  lang,
  slug,
  title,
  description,
  pubDate,
  updatedDate,
  heroImage,
  content,
} = Astro.props;

const t = useTranslations(lang);
---

<ul>
  <li class="flex flex-col gap-1">
    <a href={`/${lang}/blog/${slug}/`}>
      <h1 class="text-4xl font-bold text-boston-blue-800 dark:text-boston-blue-100 mb-1">{title}</h2>
    </a>
    <span>{description}</span>
    <div class="flex gap-2 text-xs text-neutral-400">
      <BlogDate pubDate={pubDate} updatedDate={updatedDate} />
    </div>
    <img src={heroImage} class="rounded-xl" />
    {
      content.indexOf("[[MORE]]") !== -1  ? (
        <>
          <Markdown.Inline of={content.slice(0, content.indexOf("[[MORE]]"))} />
          <a
            class="text-amber-600 dark:text-amber-200 text-xl block mt-2 mb-1"
            href={`/${lang}/blog/${slug}/`}
          >
            {t("index.readMore")}
          </a>
        </>
      ) : (
        <Markdown.Inline of={content} />
      )
    }
  </li>
  <hr class="my-4 border-b border-neutral-200 dark:border-neutral-800" />
</ul>
